import e from"classnames";import a,{useState as t,useEffect as r}from"react";import l from"moment";function n(){return a.createElement("svg",{id:"Layer",enableBackground:"new 0 0 64 64",height:"256",viewBox:"0 0 64 64",width:"256",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"m54 30h-39.899l15.278-14.552c.8-.762.831-2.028.069-2.828-.761-.799-2.027-.831-2.828-.069l-17.448 16.62c-.755.756-1.172 1.76-1.172 2.829 0 1.068.417 2.073 1.207 2.862l17.414 16.586c.387.369.883.552 1.379.552.528 0 1.056-.208 1.449-.621.762-.8.731-2.065-.069-2.827l-15.342-14.552h39.962c1.104 0 2-.896 2-2s-.896-2-2-2z"}))}function c(){return a.createElement("svg",{id:"Layer",enableBackground:"new 0 0 64 64",height:"256",viewBox:"0 0 64 64",width:"256",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"m37.379 12.552c-.799-.761-2.066-.731-2.827.069-.762.8-.73 2.066.069 2.828l15.342 14.551h-39.963c-1.104 0-2 .896-2 2s.896 2 2 2h39.899l-15.278 14.552c-.8.762-.831 2.028-.069 2.828.393.412.92.62 1.448.62.496 0 .992-.183 1.379-.552l17.449-16.62c.756-.755 1.172-1.759 1.172-2.828s-.416-2.073-1.207-2.862z"}))}function d(){return a.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 492.002 492.002",xml:"preserve"},a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M484.136,328.473L264.988,109.329c-5.064-5.064-11.816-7.844-19.172-7.844c-7.208,0-13.964,2.78-19.02,7.844\r L7.852,328.265C2.788,333.333,0,340.089,0,347.297c0,7.208,2.784,13.968,7.852,19.032l16.124,16.124\r c5.064,5.064,11.824,7.86,19.032,7.86s13.964-2.796,19.032-7.86l183.852-183.852l184.056,184.064\r c5.064,5.06,11.82,7.852,19.032,7.852c7.208,0,13.96-2.792,19.028-7.852l16.128-16.132\r C494.624,356.041,494.624,338.965,484.136,328.473z"}))),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null))}function i(){return a.createElement("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 256 256",xml:"preserve"},a.createElement("g",null,a.createElement("g",null,a.createElement("polygon",{points:"225.813,48.907 128,146.72 30.187,48.907 0,79.093 128,207.093 256,79.093 \t\t"}))),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null))}!function(e,a){void 0===a&&(a={});var t=a.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===t&&r.firstChild?r.insertBefore(l,r.firstChild):r.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}('.calendar{--accent:#d8d6d6;--backdrop:#eeebe7;--highlight:#b1aa48;--tone:#9c9999;--color-text:#333;min-width:60vh;min-height:60vh;max-height:100vh;background:var(--accent);color:var(--color-text);display:grid;grid-template-columns:2fr 5fr;grid-template-rows:50px auto;grid-template-areas:"YY YY" "MM DD";user-select:none;font-family:sans-serif}.calendar.dark_calendar{--accent:#645d55;--backdrop:#6c6e6a;--highlight:#2c281e;--tone:#21282e;--color-text:#e9e6e6}.calendar.with_presets:not(.with_time){min-height:60vh;grid-template-columns:2fr 5fr;grid-template-rows:50px auto 50px;grid-template-areas:"YY YY" "MM DD" "PRESETS PRESETS"}.calendar.with_time:not(.with_presets){min-width:75vh;grid-template-columns:2fr 5fr 2fr;grid-template-rows:50px auto;grid-template-areas:"YY YY YY" "MM DD TIME";column-gap:2px}.calendar.with_presets,.calendar.with_time{grid-template-columns:2fr 5fr 2fr;grid-template-rows:50px auto 50px;grid-template-areas:"YY YY YY" "MM DD TIME" "PRESETS PRESETS PRESETS"}.calendar.years_picker{grid-template-columns:1fr!important;grid-template-rows:1fr!important}.calendar-yearspicker{background:var(--backdrop);display:grid;grid-template-columns:50px repeat(5,1fr) 50px;grid-template-rows:repeat(5,1fr);animation:fadeIn 1 .2s linear 0 forwards}.calendar-yearspicker-arrow{background:var(--accent)}.calendar-yearspicker-arrow:first-child{grid-area:1/1/6/2}.calendar-yearspicker-arrow:last-child{grid-area:1/7/6/7}.calendar-yearspicker-year{background:var(--backdrop);opacity:0}.calendar-yearspicker-year.year_anim{animation-name:fadeIn;animation-duration:.3s;animation-iteration-count:1;animation-fill-mode:forwards}.calendar-presets{grid-area:PRESETS;display:flex;width:100%}.calendar-presets-preset{text-align:center;font-size:13px;padding:3px;width:20%;background:var(--tone);border-right:1px solid var(--backdrop)}.calendar-presets-preset:last-child{border:none}.calendar-time{grid-area:TIME;display:flex;padding-left:1px}.calendar-time-half{width:50%;display:grid;grid-template-columns:1fr;grid-template-rows:repeat(7,1fr);background:var(--backdrop)}.calendar-time-half-cell:first-child,.calendar-time-half-cell:last-child{background:var(--accent)}.calendar-time-half-cell:nth-child(4){position:relative}.calendar-time-half-cell svg{fill:var(--color-text);max-width:20%}.calendar-years{grid-area:YY;display:flex;background:var(--tone);justify-content:space-between}.calendar-years-current{width:60%;height:100%;text-align:center;font:700 21px sans-serif}.calendar-years-current:hover{cursor:pointer}.calendar-years-arrow{width:50px;height:100%}.calendar-months{grid-area:MM;display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(6,1fr)}.calendar-months-month{height:100%;padding:1px}.calendar-days{grid-area:DD;background:var(--backdrop);display:grid;grid-template-columns:repeat(7,1fr)}.calendar-time-half-cell:nth-child(4),.calendar_active{background:var(--highlight)}.calendar-button,.calendar-days-day,.calendar-months-month,.calendar-presets-preset,.calendar-time-half-cell,.calendar-years-arrow,.calendar-yearspicker-arrow,.calendar-yearspicker-year{border:none;color:var(--color-text)}.calendar-button:not([disabled]):active,.calendar-button:not([disabled]):hover,.calendar-days-day:not([disabled]):active,.calendar-days-day:not([disabled]):hover,.calendar-months-month:not([disabled]):active,.calendar-months-month:not([disabled]):hover,.calendar-presets-preset:not([disabled]):active,.calendar-presets-preset:not([disabled]):hover,.calendar-time-half-cell:not([disabled]):active,.calendar-time-half-cell:not([disabled]):hover,.calendar-years-arrow:not([disabled]):active,.calendar-years-arrow:not([disabled]):hover,.calendar-yearspicker-arrow:not([disabled]):active,.calendar-yearspicker-arrow:not([disabled]):hover,.calendar-yearspicker-year:not([disabled]):active,.calendar-yearspicker-year:not([disabled]):hover{background:var(--highlight);cursor:pointer}.calendar-button[disabled],.calendar-days-day[disabled],.calendar-months-month[disabled],.calendar-presets-preset[disabled],.calendar-time-half-cell[disabled],.calendar-years-arrow[disabled],.calendar-yearspicker-arrow[disabled],.calendar-yearspicker-year[disabled]{cursor:not-allowed;filter:opacity(.4)}.calendar-button svg,.calendar-days-day svg,.calendar-months-month svg,.calendar-presets-preset svg,.calendar-time-half-cell svg,.calendar-years-arrow svg,.calendar-yearspicker-arrow svg,.calendar-yearspicker-year svg{fill:var(--color-text);max-height:50%}.calendar-days-day,.calendar-fcc,.calendar-months-month,.calendar-presets-preset,.calendar-time-half-cell,.calendar-years-arrow,.calendar-years-current,.calendar-yearspicker-arrow,.calendar-yearspicker-year{display:flex;align-items:center;justify-content:center}.dividerhour:after{content:":";position:absolute;top:50%;transform:translateY(-55%);right:0;opacity:1;animation:fadeIn 1.1s infinite}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}');const o=({date:e,toggleYearsPicker:t,changeAction:r})=>a.createElement("div",{className:"calendar-years"},a.createElement("div",{tabIndex:"0",role:"button",className:"calendar-years-arrow",onClick:()=>{r(l(e).subtract(1,"Y"))}},n()),a.createElement("div",{onClick:t,className:"calendar-years-current"},l(e).format("YYYY")),a.createElement("div",{onClick:()=>{r(l(e).add(1,"Y"))},role:"button",tabIndex:"0",className:"calendar-years-arrow"},c())),s=({toggleYearsPicker:d,date:i,changeAction:o})=>{const[s,m]=t([]),[h,g]=t(0),[p,u]=t(!0);return r((()=>{g(l(i))}),[i]),r((()=>{m(new Array(25).fill(+l(h).format("YYYY")-12).map(((e,a)=>e+a))),u(!1),setTimeout((()=>{u(!0)}),50)}),[h]),a.createElement("div",{className:"calendar-yearspicker",onContextMenu:(e=null)=>{e&&e.preventDefault(),o(l(h)),d()}},a.createElement("button",{disabled:+l(h).format("YYYY")<1925,onClick:()=>g(l(h).subtract(25,"y")),className:"calendar-yearspicker-arrow"},n()),s&&s.map((t=>{return a.createElement("button",{key:t,disabled:t>2100||t<1900,onClick:()=>{return e=t,o(l(h).year(e)),void d();var e},className:e("calendar-yearspicker-year",{year_anim:p,calendar_active:+l(h).format("YYYY")===t}),style:{animationDelay:(r=t,`\n    ${(.1*Math.abs(+l(h).format("YYYY")-r)/2).toFixed(2)}s`),animationIterationCount:1}},t);var r})),a.createElement("button",{className:"calendar-yearspicker-arrow",disabled:+l(h).format("YYYY")>2075,onClick:()=>g(l(h).add(25,"y"))},c()))},m=({date:t,changeAction:r})=>{let n=Array.from({length:12},((e,a)=>a));return a.createElement("div",{className:"calendar-months"},n.map((n=>a.createElement("div",{key:n,tabIndex:"0",role:"button",className:e("calendar-months-month",{calendar_active:n+1===+l(t).format("M")}),onClick:()=>{var e;(e=n)+1!==+l(t).format("M")&&r(l(t).month(e))}},l().month(n).format("MMMM")))))},h=({date:n,changeAction:c})=>{const[d,i]=t([]);return r((()=>{let e=l(n).daysInMonth();i(Array.from({length:e},((e,a)=>a+1)))}),[n]),a.createElement("div",{className:"calendar-days"},d.map((t=>a.createElement("div",{key:t,onClick:()=>{var e;(e=t)!==l(n).date()&&c(l(n).set("date",e))},tabIndex:"0",role:"button",className:e("calendar-days-day",{calendar_active:l(n).date()===t})},t))))},g=({date:e,changeAction:n})=>{const[c,o]=t(+l(e).format("HH")),[s,m]=t(+l(e).format("mm")),h=(a,t)=>{n(l(e).add(a,t))},g=(a,t)=>{n(l(e).subtract(a,t))},p=({deltaY:a},t)=>{n(a<0?l(e).subtract(1,t):l(e).add(1,t))};return r((()=>{o(l(e).format("HH")),m(l(e).format("mm"))}),[e]),r((()=>(document.addEventListener("scroll",p),()=>{document.removeEventListener("scroll",p)})),[]),a.createElement("div",{className:"calendar-time"},a.createElement("div",{className:"calendar-time-half hours",onWheel:e=>p(e,"H")},a.createElement("div",{className:"calendar-time-half-cell",onClick:()=>g(1,"H")},d()),a.createElement("div",{onClick:()=>g(2,"H"),className:"calendar-time-half-cell"},l(e).subtract(2,"H").format("HH")),a.createElement("div",{onClick:()=>g(1,"H"),className:"calendar-time-half-cell"},l(e).subtract(1,"H").format("HH")),a.createElement("div",{className:"calendar-time-half-cell dividerhour"},c),a.createElement("div",{onClick:()=>h(1,"H"),className:"calendar-time-half-cell"},l(e).add(1,"H").format("HH")),a.createElement("div",{onClick:()=>h(2,"H"),className:"calendar-time-half-cell"},l(e).add(2,"H").format("HH")),a.createElement("div",{className:"calendar-time-half-cell",onClick:()=>h(1,"H")},i())),a.createElement("div",{className:"calendar-time-half",onWheel:e=>p(e,"m")},a.createElement("div",{className:"calendar-time-half-cell",onClick:()=>g(1,"m")},d()),a.createElement("div",{onClick:()=>g(2,"m"),className:"calendar-time-half-cell"},l(e).subtract(2,"m").format("mm")),a.createElement("div",{onClick:()=>g(1,"m"),className:"calendar-time-half-cell"},l(e).subtract(1,"m").format("mm")),a.createElement("div",{className:"calendar-time-half-cell"},s),a.createElement("div",{onClick:()=>h(1,"m"),className:"calendar-time-half-cell"},l(e).add(1,"m").format("mm")),a.createElement("div",{onClick:()=>h(2,"m"),className:"calendar-time-half-cell"},l(e).add(2,"m").format("mm")),a.createElement("div",{onClick:()=>h(1,"m"),className:"calendar-time-half-cell"},i())))},p={ru:{t:"сегодня",y:"вчера",wa:"неделю назад",ma:"месяц назад",ya:"год назад"},"en-gb":{t:"today",y:"yesterday",wa:"week ago",ma:"month ago",ya:"year ago"},uk:{t:"сьогодні",y:"вчора",wa:"тиждень тому",ma:"місяць тому",ya:"рік  тому"},de:{t:"heute",y:"gestern",wa:"vor 1 woche",ma:"vor 1 Monat",ya:"мor 1 Jahr"},"zh-cn":{t:"今天",y:"昨天",wa:"一周前",ma:"一个月前",ya:"一年前"},fr:{t:"jour",y:"hier",wa:"il y a une semaine",ma:"il y a un mois",ya:"il y a un an"}},u=[{id:1,title:"t",func:e=>{e(l())}},{id:2,title:"y",func:e=>{e(l().subtract(1,"d"))}},{id:3,title:"wa",func:e=>{e(l().subtract(1,"w"))}},{id:4,title:"ma",func:e=>{e(l().subtract(1,"M"))}},{id:0,title:"ya",func:e=>{e(l().subtract(1,"y"))}}],y=({locale:e,changeAction:t})=>{let r=p[e||"en-gb"];return a.createElement("div",{className:"calendar-presets"},u.map((({id:e,title:l,func:n})=>a.createElement("div",{key:e,onClick:()=>n(t),className:"calendar-presets-preset"},r[l]))))},f=({presets:l=!1,date:n=new Date,time:c=!1,locale:d="en-gb",onChangeDate:i,width:p=null,height:u=null,dark:f=!1})=>{const[v,E]=t(!d),[b,w]=t(!1),k=()=>{w(!b)},x=e=>{i?i(e.toDate()):console.warn('Must be a handle function "onChangeDate"')};return r((()=>{d&&"string"==typeof d&&import(`moment/locale/${d}`).then((()=>{E(!0)}))}),[]),a.createElement("div",{style:{width:p,height:u},className:e("calendar",{with_time:c,with_presets:l,years_picker:b,dark_calendar:f})},b?a.createElement(s,{date:n,changeAction:x,toggleYearsPicker:k}):a.createElement(a.Fragment,null,a.createElement(o,{date:n,toggleYearsPicker:k,changeAction:x}),v&&a.createElement(m,{date:n,changeAction:x}),a.createElement(h,{date:n,changeAction:x}),c&&a.createElement(g,{date:n,changeAction:x}),l&&a.createElement(y,{locale:d,date:n,changeAction:x})))};export{f as Calendar};
